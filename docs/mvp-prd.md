# 产品需求文档（MVP）—— Markdown → 公众号富文本排版工具

概述  
一款前端优先的工具，把你写好的 Markdown（支持图片、Mermaid 流程图、数学公式、代码块等）一键转换为能直接粘到微信公众平台编辑器的富文本 HTML。用户可切换内置风格模板、实时预览并一键复制富文本或导出 HTML/ZIP，优先保证隐私与本地处理。

目标用户与代表性场景  
- 目标用户：习惯用 Markdown 写文章、经常发公众号的个人创作者／自媒体运营者（例如你）。  
- 场景示例：  
  - 写完文章后希望零改动把内容粘到公众号后台，省去繁琐排版。  
  - 文章含复杂流程图或公式，需要在公众号里正确显示。  
  - 想为同一篇文章套不同视觉风格（极简、技术、学术）快速对外发布。

用户使用流程（简洁的 6 步）  
1. 在编辑器粘贴或撰写 Markdown（支持图片粘贴/拖拽）。  
2. 点击或看到实时渲染预览（右侧）。  
3. 在模板选择器选风格，预览实时更新。  
4. 点击「复制富文本（HTML）」到剪贴板，或选择「导出 HTML/ZIP」。  
5. 在公众号后台粘贴并检查，如需微调再编辑。  
6. 可选：下载图片包或按需上传图床并替换链接。

MVP 核心功能清单（必须实现）  
- 编辑与输入  
  - 支持粘贴/编辑 Markdown（GFM 基本语法：标题、列表、表格、代码、引用）。  
  - 支持本地图片粘贴或拖拽进编辑区（作为文件处理）。  
- 渲染与转换  
  - Markdown → HTML（稳健解析器）。  
  - Mermaid 块渲染为内嵌 SVG（在输出 HTML 中保留）。  
  - 数学公式渲染（KaTeX）并内嵌可显示的 HTML/CSS。  
  - 代码块语法高亮，输出为兼容公众号的样式（尽量内联或最小 CSS）。  
  - 支持表格、脚注、任务列表等常用扩展。  
- 样式与模板  
  - 至少 3 种内置模板（极简 / 技术 / 学术）。  
  - 模板样式以内联 CSS 或内嵌 `<style>` 注入，减少被编辑器清洗后的样式丢失。  
- 输出与复制  
  - 一键「复制富文本（text/html）」到剪贴板（优先 Clipboard API，兼容回退）。  
  - 「导出 HTML」单文件保存。  
  - 「导出 ZIP」打包 HTML + 本地图片（备用方案，处理大图时使用）。  
- 隐私与本地优先策略  
  - 所有转换在本地进行，不默认上传用户内容到服务器。  
  - 可选集成图床需要用户明确授权（非默认）。

可选但建议纳入 MVP 的增强（次要优先）  
- 图片处理策略：小图片（如 <500KB）内嵌 base64，大图提示打包或上传图床。  
- 针对公众号编辑器常见 stripping 的补救：重要样式尽量内联、对常见被删属性做替代。  
- 提供「复制纯文本但尽量保留格式」的备用按钮，作为编辑器兼容性回退。  
- 允许保存并复用自定义模板（面向高级用户）。

非功能需求（MVP 级别）  
- 浏览器兼容：优先支持 Chrome / Edge / Firefox（桌面）。  
- 离线可用：核心功能在本地运行（把 Mermaid、KaTeX 等包本地打包或按需懒加载）。  
- 性能与体验：中短文档渲染延迟控制在可接受范围（大致 <1s 级别体验感）。  
- 安全：生成 HTML 前进行 sanitize，去除 `<script>` 等危险内容以避免 XSS。  
- 易用性：复制/导出操作需给出明确成功/失败反馈，并提供降级导出方式（例如下载 HTML/ZIP）。

